server {
    listen 80;
    server_name localhost;
    root /home/app;
    
    # Enable passenger
    passenger_enabled on;
    passenger_app_type node;
    passenger_startup_file server.cjs;
    passenger_app_root /home/app;
    
    # Set passenger user
    passenger_user app;
    passenger_group app;
    
    # Node.js environment
    passenger_app_env production;
    passenger_nodejs /usr/bin/node;
    passenger_min_instances 1;
    passenger_max_instances 4;
    
    # Logging
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;
    
    # Handle all requests through the Node.js app
    location / {
        # This will be handled by passenger
    }
}